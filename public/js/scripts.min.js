"use strict";var StartApp=angular.module("StartApp",[]),helpers=function(){var t=function(t){return t.toISOString().substring(0,10)};return{toDateIso:t}}(),serviceWorker=function(){var t=function(){navigator.serviceWorker.controller?console.log(navigator.serviceWorker.controller.scriptURL+" already registered"):navigator.serviceWorker.register("/service-worker.js",{scope:"./"}).then(function(t){console.log(t.scope+" registered"),console.log("Service worker change, registered the service worker")})},e=function(){navigator.serviceWorker.getRegistration().then(function(t){t.unregister(),console.log("unregistered service worker:",t)})};return{register:t,unregister:e}}();StartApp.factory("BackgroundApi",["$http",function(t){var e=function(e){return t({method:"GET",url:"/background",params:{date:e}})};return{get:e}}]),StartApp.controller("LinksController",["$scope",function(t){t.links=[[{name:"Localhost",url:"http://localhost:3000"}],[{name:"Google",url:"https://www.google.co.uk"},{name:"Translate",url:"https://translate.google.com/"},{name:"Duck Duck Go",url:"https://start.duckduckgo.com"},{name:"Maps",url:"https://google.co.uk/maps"}],[{name:"Imgur",url:"https://www.imgur.com"},{name:"4chan",url:"https://www.4chan.org"},{name:"Facebook",url:"https://www.facebook.com"}],[{name:"YouTube",url:"https://www.youtube.com"},{name:"Netflix",url:"https://www.netflix.com/browse"},{name:"Spotify",url:"https://open.spotify.com"}],[{name:"Amazon",url:"https://www.amazon.co.uk"},{name:"AlternativeTo",url:"https://alternativeto.net"}],[{name:"Feedly",url:"https://feedly.com/i/latest"},{name:"Toggl",url:"https://www.toggl.com/app/timer"},{name:"Trello",url:"https://trello.com"}],[{name:"GitHub",url:"https://github.com/"},{name:"Stack Overflow",url:"https://stackoverflow.com/"},{name:"Pluralsight",url:"https://app.pluralsight.com/"}],[{name:"CoinLib",url:"https://coinlib.io"},{name:"CoinMarketCap",url:"https://coinmarketcap.com"},{name:"EthTrader",url:"https://www.reddit.com/r/ethtrader/"}]]}]),StartApp.controller("Background",["$scope","$sce","BackgroundApi",function(t,e,r){var o=-1;t.loaded=!1,t.show=!1,t.isNextBackground=!1,t.hide=!1;var n=function(t,e){return Math.sqrt(Math.pow(t-e,2))},a=function(){var a=new Date;a.setDate(a.getDate()+o);var i=new Promise(function(o,i){r.get(helpers.toDateIso(a)).then(function(r){var a=r.data.data[0].attributes,i=null;a.image.renditions.forEach(function(t){null==i&&(i=t);var e=n(window.innerWidth,t.width);e<n(window.innerWidth,i.width)&&(i=t)}),t.data={backgroundUrl:i.uri.replace("http:","https:"),title:a.image.title,description:e.trustAsHtml(a.image.caption),link:a.uri},t.loaded=!0,o()})});return i};t.prevBackground=function(){o--,a().then(function(){t.isNextBackground=!0,t.$apply()})},t.nextBackground=function(){o++,a().then(function(){o==-1&&(t.isNextBackground=!1,t.$apply())})},a(),t.press=function(e){console.log(e),27==e.keyCode&&(t.hide=!t.hide),37==e.keyCode&&t.prevBackground(),39==e.keyCode&&t.nextBackground()}}]),StartApp.controller("AboutImageController",["$scope","$sce","BackgroundApi",function(t,e,r){}]),serviceWorker.register();