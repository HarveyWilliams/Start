"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var c=t[o](a),i=c.value}catch(u){return void r(u)}return c.done?void e(i):Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}var StartApp=angular.module("StartApp",[]),helpers=function(){var e=function(e){return e.toISOString().substring(0,10)};return{toDateIso:e}}(),serviceWorker=function(){var e=function(){navigator.serviceWorker.controller?console.log(navigator.serviceWorker.controller.scriptURL+" already registered"):navigator.serviceWorker.register("/service-worker.js",{scope:"./"}).then(function(e){console.log(e.scope+" registered"),console.log("Service worker change, registered the service worker")})},t=function(){navigator.serviceWorker.getRegistration().then(function(e){e.unregister(),console.log("unregistered service worker:",e)})},r=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,caches.keys();case 2:e=t.sent,e.forEach(function(e){caches["delete"](e)});case 4:case"end":return t.stop()}},t,this)}));return function(){return e.apply(this,arguments)}}();return{register:e,unregister:t,deleteCaches:r}}();StartApp.factory("BackgroundApi",["$http",function(e){var t=function(t){return e({method:"GET",url:"/background",params:{date:t}})};return{get:t}}]),StartApp.controller("LinksController",["$scope",function(e){e.links=[[{name:"Localhost",url:"http://localhost:3000"}],[{name:"Google",url:"https://www.google.co.uk"},{name:"Translate",url:"https://translate.google.com/"},{name:"Duck Duck Go",url:"https://start.duckduckgo.com"},{name:"Maps",url:"https://google.co.uk/maps"}],[{name:"Imgur",url:"https://www.imgur.com"},{name:"4chan",url:"https://www.4chan.org"},{name:"Facebook",url:"https://www.facebook.com"}],[{name:"YouTube",url:"https://www.youtube.com"},{name:"Netflix",url:"https://www.netflix.com/browse"},{name:"Spotify",url:"https://open.spotify.com"}],[{name:"Amazon",url:"https://www.amazon.co.uk"},{name:"AlternativeTo",url:"https://alternativeto.net"}],[{name:"Feedly",url:"https://feedly.com/i/latest"},{name:"Toggl",url:"https://www.toggl.com/app/timer"},{name:"Trello",url:"https://trello.com"}],[{name:"GitHub",url:"https://github.com/"},{name:"Stack Overflow",url:"https://stackoverflow.com/"},{name:"Pluralsight",url:"https://app.pluralsight.com/"}],[{name:"CoinLib",url:"https://coinlib.io"},{name:"CoinMarketCap",url:"https://coinmarketcap.com"},{name:"EthTrader",url:"https://www.reddit.com/r/ethtrader/"}]]}]),StartApp.controller("Background",["$scope","$sce","BackgroundApi",function(e,t,r){var n=-1;e.loaded=!1,e.show=!1,e.isNextBackground=!1,e.hide=!1;var o=function(e,t){return Math.sqrt(Math.pow(e-t,2))},a=function(){var a=new Date;a.setDate(a.getDate()+n);var c=new Promise(function(n,c){r.get(helpers.toDateIso(a)).then(function(r){var a=r.data.data[0].attributes,c=null;a.image.renditions.forEach(function(e){null==c&&(c=e);var t=o(window.innerWidth,e.width);t<o(window.innerWidth,c.width)&&(c=e)}),e.data={backgroundUrl:c.uri.replace("http:","https:"),title:a.image.title,description:t.trustAsHtml(a.image.caption),link:a.uri},e.loaded=!0,n()})});return c};e.prevBackground=function(){n--,a().then(function(){e.isNextBackground=!0,e.$apply()})},e.nextBackground=function(){n++,a().then(function(){n==-1&&(e.isNextBackground=!1,e.$apply())})},a(),e.press=function(t){console.log(t),27==t.keyCode&&(e.hide=!e.hide),37==t.keyCode&&e.prevBackground(),39==t.keyCode&&e.nextBackground()}}]),StartApp.controller("AboutImageController",["$scope","$sce","BackgroundApi",function(e,t,r){}]),window.config.useServiceWorker&&serviceWorker.register();